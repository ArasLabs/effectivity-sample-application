<AML>
 <Item type="Method" id="1C30FBE1390045FCBF7B10B88512B52F" action="add">
  <execution_allowed_to keyed_name="World" type="Identity">A73B655731924CD0B027E4F4D5FCC0A9</execution_allowed_to>
  <method_code><![CDATA[	int partBomsCount = this.getItemCount();

	for (int i = 0; i < partBomsCount; i++)
	{
		Item partBom = this.getItemByIndex(i);
		Item partBomExpressions = this.newItem("effs_Part_BOM_expression", "get");
		partBomExpressions.setProperty("source_id", partBom.getID());
		partBomExpressions.setAttribute("select", "id");
		partBomExpressions = partBomExpressions.apply();

		if (partBomExpressions.isError() && !string.Equals(partBomExpressions.getErrorCode(), "0", StringComparison.Ordinal))
		{
			return partBomExpressions;
		}

		List<string> expressionStringNotations = new List<string>();
		int expressionsCount = partBomExpressions.getItemCount();
		bool addBrackets = expressionsCount > 1;

		for (int j = 0; j < expressionsCount; j++)
		{
			Item partBomExpression = partBomExpressions.getItemByIndex(j);
			string expressionStringNotation = partBomExpression.getProperty("expression_string_notation");
			expressionStringNotations.Add(addBrackets ? "(" + expressionStringNotation + ")" : expressionStringNotation);
		}

		string effectivityStringNotation = string.Join(" OR ", expressionStringNotations);
		partBom.setProperty("effectivity_string_notation", effectivityStringNotation);
	}

	return this;]]></method_code>
  <method_type>C#</method_type>
  <name>effs_sample_PartBOM_OnAfterGet</name>
 </Item>
</AML>